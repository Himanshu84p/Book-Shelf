<% layout("/layouts/boilerplate.ejs") %>

<body>
  <h1 class="heading">All Orders</h1>
  <p class="medium-heading">Total number of Orders : <%= totalOrders %></p>
  <p class="medium-heading">
    Total number of completed Orders : <%= completedOrders %>
  </p>
  <p class="medium-heading">
    Total number of pending Orders : <%= pendingOrders %>
  </p>
  <table class="table align-middle mb-0 bg-white">
    <thead class="bg-light">
      <tr>
        <th>User Id</th>
        <th>Order Items</th>
        <th>Order Id</th>
        <th>Order Status</th>
        <th>Order Amount</th>
      </tr>
    </thead>
    <tbody>
      <%for(order of allOrders) {%>
      <tr>
        <td>
          <div class="d-flex align-items-center">
            <img
              src="https://t4.ftcdn.net/jpg/02/29/75/83/360_F_229758328_7x8jwCwjtBMmC6rgFzLFhZoEpLobB6L8.jpg"
              alt=""
              style="width: 45px; height: 45px"
              class="rounded-circle"
            />
            <div class="ms-3">
              
              <p class="fw-bold mb-1"><%= order.owner %></p>
              <%= order.updatedAt.toISOString(). replace(/T/, ' ')
            .replace(/\..+/, '') %>
            </div>
          </div>
        </td>
        <td>
          <%for(book of order.books){%>

            <span class="badge badge-primary rounded-pill d-inline"
              ><%= book.title %> &nbsp;  Q:<%= book.quantity %> &nbsp; &#8377;<%= book.price %> </span
            ><br />
            <%}%>
        </td>
        <td>
          <span class="badge badge-primary rounded-pill d-inline"
            ><%= order.id %></span
          >
        </td>
        <td>
          <span class="badge <%= order.status === "pending"? "badge-warning":"badge-success" %> rounded-pill d-inline"
            ><%= order.status %></span
          >
        </td>
        <td>
          <button type="button" class="btn btn-link btn-sm btn-rounded">
            &#8377; <%= order.totalAmount %>
          </button>
        </td>
      </tr>

      <%}%>
    </tbody>
  </table>
</body>
